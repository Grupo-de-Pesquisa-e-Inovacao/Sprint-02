<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./css/SimuladorStyle.css">

  <link rel="preconnect" href="https://rsms.me/">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

    <script src="./js/sessao.js"></script>


  <title>Simulador Financeiro Avitrack Solutions</title>
</head>

<body onload="validarSessao()">
  <div class="header">
    <div class="navbar">
      <a href="index.html" class="logo">
        <img src="Imagens/Avitrack Logotipo.png" alt="Logo"/>
      </a>

      <ul class="nav-list center-links">
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="Dashboard.html" style="visibility: hidden;" id="botaoDashboard">Dashboard</a></li>
      </ul>

      <ul class="nav-list right-links">
        <li><a href="Cadastro.html" id="b_usuario">Cadastre-se</a></li>
        <li><a href="Login.html" id="botaoLogin">Login</a></li>
      </ul>
    </div>
  </div>



  <!-- Div container que abrange todo o sistema -->
  <div class="divContainer">


    <!-- Div de Conteudos -->
    <div class="divConteudo">

      <div id="divTitulo">
        <h1>Simulador Financeiro</h1>
      </div>

      <!-- Div que armazena as inputs -->
      <div class="divConteudo2">
        <!-- Div que agrupa todas as inputs -->
        <!-- Input de Quantidade de Frangos -->
        <div class="div_campos">
          <input type="text" id="input_qtdFrango" required autocomplete="off">
          <div class="textoInput">
            <i class="fas fa-solid fa-building"></i>
            <span>Quantidade de Frangos</span>
          </div>
        </div>

        <!-- Input de Peso M√©dio dos Frangos -->
        <div class="div_campos">
          <input type="text" id="input_kgMedioFrango" required autocomplete="off">
          <div class="textoInput">
            <i class="fas fa-solid fa-building"></i>
            <span>Peso M√©dio dos Frangos</span>
          </div>
        </div>

        <!-- Input de Pre√ßo de Venda -->
        <div class="div_campos">
          <input type="text" id="input_precoMedio" required autocomplete="off">
          <div class="textoInput">
            <i class="fas fa-solid fa-building"></i>
            <span>Pre√ßo de Venda</span>
          </div>
        </div>


        <!-- Input de Custo de Produ√ß√£o -->
        <div class="div_campos">
          <input type="text" id="input_custos" required autocomplete="off">
          <div class="textoInput">
            <i class="fas fa-solid fa-building"></i>
            <span>Custo de Produ√ß√£o</span>
          </div>
        </div>

        <!-- Input Quantidade de Mortes -->
        <div class="div_campos">
          <input type="text" id="input_mortalidadeFrango" required autocomplete="off">
          <div class="textoInput">
            <i class="fas fa-solid fa-building"></i>
            <span>Quantidade de Mortes</span>
          </div>
        </div>

      </div>


      <!-- Bot√£o de Calcular as Despesas -->
      <button onclick="calcularDepesas()">Calcular Despesas</button>

    </div>
  </div>


  <!-- Resultados -->
  <div class="divResultados">

    <!-- Div que mostra o resultado cr√≠tico -->
    <div class="divMensagem">

      <div id="i_Resultados"></div>

    </div>

    <!-- Div que mostra os resultados dos c√°lculos -->
    <div class="divMensagem">
      <div id="i_Solucoes"></div>
    </div>


  </div>

</body>

</html>

<script>

  function calcularDepesas() {
    // Quantidade total de frangos
    var qtdFrango = Number(input_qtdFrango.value);
    // Peso m√©dio de cada frango             
    var pesomedio = Number(input_kgMedioFrango.value);
    // Pre√ßo m√©dio de venda por quilo    
    var precomedio = Number(input_precoMedio.value);
    // Custo de produ√ß√£o por quilo
    var custos = Number(input_custos.value);
    // Total de frangos mortos
    var totalmortalidade = Number(input_mortalidadeFrango.value);

    // C√°lculos 
    // Peso total da produ√ß√£o
    var kgtotal = qtdFrango * pesomedio;
    // Receita total (bruta)
    var precobruto = kgtotal * precomedio;
    // Despesa total da produ√ß√£o
    var custototal = custos * kgtotal;
    // Lucro l√≠quido da produ√ß√£o       
    var lucro = precobruto - custototal;


    // C√°lculos mortalidade
    // Peso total perdido por mortalidade
    var kgmortalidade = totalmortalidade * pesomedio;
    // Receita que seria obtida com os frangos mortos
    var perdatotal = kgmortalidade * precomedio;
    // Percentual de mortalidade                             
    var porcentagemMorte = (totalmortalidade / qtdFrango) * 100;

    // Vari√°veis para exibi√ß√£o
    var corMortalidade, situacao;

    // Valida se os dados inseridos s√£o v√°lidos
    if (qtdFrango > 0 && pesomedio > 0 && precomedio > 0 && custos > 0 && totalmortalidade >= 0) {


      // Define situa√ß√£o com base na porcentagem de mortalidade
      if (porcentagemMorte < 5) {
        corMortalidade = "green";
        situacao = "ACEIT√ÅVEL";
      } else if (porcentagemMorte <= 10) {
        corMortalidade = "orange";
        situacao = "ALERTA";
      } else {
        corMortalidade = "red";
        situacao = "CR√çTICO";
      }

      // C√°lculo da porcentagem da perda em rela√ß√£o ao lucro
      var porcentagem = (perdatotal / (lucro || 1)) * 100;

      // Se n√£o houve lucro, n√£o h√° porcentagem de perda a considerar
      if (lucro <= 0) {
        porcentagem = 0;
      }

      // Define cor e mensagem final com base no lucro
      var cor = lucro < 0 ? "red" : "green";
      var mensagem = lucro < 0 ? "Sua perda l√≠quida √© de:" : "Seu lucro l√≠quido obtido √© de:";

      var mensagemMortalidade = ``;

      if (porcentagemMorte <= 5) {
        mensagemMortalidade = `<span style="color: green; padding-bottom: 50px;"><b>  ‚úÖ ACEIT√ÅVEL</b></span>`
      } else if (porcentagemMorte <= 10) {
        mensagemMortalidade = `<span style="color: orange; padding-bottom: 50px;"><b> ‚ö†Ô∏è ALERTA</b></span>`
      } else if (porcentagemMorte > 10) {
        mensagemMortalidade = `<span style="color: red; padding-bottom: 50px;"><b> üõë CR√çTICO</b></span>`
      }



      // Exibe os resultados detalhados
      i_Resultados.innerHTML = `
      <div class="divTituloResultados">
        <h1>Dados da Produ√ß√£o</h1>
      </div>

      <p> üêî A sua produ√ß√£o conta com <span style="text-decoration: underline; color: var(--amarelo)"><b>${qtdFrango}</b></span> cabe√ßas de frango, com cada frango pesando em m√©dia <span style="text-decoration: underline; color: var(--amarelo)"><b>${pesomedio}Kg</b></span>.</p>
      <p> üì¶ O peso total √© de: <span style="text-decoration: underline; color: var(--amarelo)"><b>${kgtotal.toFixed(2)}Kg</b></span>.</p>

      <br>
      <h2>üí∞ Resultados Financeiros</h2>
      <p> ‚úÖ O faturamento bruto √© de: <span style="color: green;"> <b>R$${precobruto.toFixed(2)}</b></span></p>

      <p> ‚ùå Os custos totais de produ√ß√£o somam: <span style="color: red;"><b>R$${custototal.toFixed(2)}</b></span></p>

      <p> üí∏ ${mensagem} <span style="color: ${cor};"><b>R$${lucro.toFixed(2)}</b></span></p>
      <br>
  
      <h2>‚ö†Ô∏è Perdas por Mortalidade</h2>
      <p> üìâ Com a taxa de mortalidade de <span style="color: red;"><b>${totalmortalidade}</b></span> frangos. S√£o perdidos <span style="color: red;"><b>${kgmortalidade.toFixed(2)}Kg.</b></span></p>

      <p style="padding-bottom: 50px"> üìä A perda total registrada √©: <span style="color: red;"><b>R$${perdatotal.toFixed(2)}</b></span> equivalente a <span style="text-decoration: underline; color: var(--amarelo)""><b>${porcentagem.toFixed(0)}%</b></span> do valor <span style="color: green;"><b>R$${lucro.toFixed(2)}</b></span><br></p>
      `;

      // Exibe a avalia√ß√£o da situa√ß√£o de mortalidade
      i_Solucoes.innerHTML = `

      <div class="divTituloResultados">
        <h1>Situa√ß√£o do Avi√°rio</h1>
      </div>
    
      <p><span style="color: ${corMortalidade};"><b>${mensagemMortalidade}</b></span> - voc√™ teve uma baixa de <span style="text-decoration: underline; color: var(--amarelo)"><b>${totalmortalidade}</b></span> frangos que representa <span style="color: red;"><b>${porcentagemMorte.toFixed(2)}%</b></span> do total de <span style="text-decoration: underline; color: var(--amarelo)"><b>${qtdFrango}</b></span> frangos</p>
      
      <br>
      
      <h2>Situa√ß√µes:</h2>

      <p style="color: green;"><b> ‚úÖ ACEIT√ÅVEL</b> - Abaixo de 5% de perdas.</p>

      <p style="color: orange;"><b> ‚ö†Ô∏è ALERTA</b> - Entre 5% e 10% de perdas.</p>

      <p style="color: red; padding-bottom: 50px;"><b> üõë CR√çTICO</b> - Acima de 10% de perdas.</p>
      `;
    } else {
      alert(`Por favor, preencha todos os campos com valores v√°lidos!`);
    }
  }
</script>